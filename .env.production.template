# ============================================
# CivicFlow2 - Production Environment Template
# ============================================
# Copy this to Railway environment variables
# Generate secure secrets before deploying!

# ============================================
# SERVER CONFIGURATION
# ============================================
NODE_ENV=production
PORT=3000
API_VERSION=v1

# ============================================
# DEMO MODE (Recommended for Railway)
# ============================================
# Enable demo mode for resilient deployment
DEMO_MODE=true
DEMO_MODE_AUTO_ENABLE=true
DEMO_MODE_MAX_RETRIES=3

# ============================================
# DATABASE (Optional - Railway auto-injects)
# ============================================
# If you add PostgreSQL service in Railway, it will automatically set:
# DATABASE_URL=postgresql://user:pass@host:port/database
# Leave empty to run in demo mode without database

# ============================================
# REDIS (Optional - Railway auto-injects)
# ============================================
# If you add Redis service in Railway, it will automatically set:
# REDIS_URL=redis://default:pass@host:port
# Leave empty to use in-memory cache

# ============================================
# SECURITY (REQUIRED - GENERATE SECURE VALUES!)
# ============================================
# Generate with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=CHANGE_ME_GENERATE_SECURE_64_CHAR_HEX_STRING

# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
ENCRYPTION_KEY=CHANGE_ME_GENERATE_SECURE_32_CHAR_HEX_STRING

# Bcrypt rounds (higher = more secure but slower)
BCRYPT_ROUNDS=12

# ============================================
# JWT CONFIGURATION
# ============================================
JWT_ACCESS_TOKEN_EXPIRY=15m
JWT_REFRESH_TOKEN_EXPIRY=7d
JWT_ISSUER=civicflow2
JWT_AUDIENCE=civicflow2-api

# ============================================
# CORS (Railway auto-sets RAILWAY_PUBLIC_DOMAIN)
# ============================================
# Railway automatically provides RAILWAY_PUBLIC_DOMAIN
# You can also set custom domains here (comma-separated)
# CORS_ORIGIN=https://civicflow.com,https://www.civicflow.com

# ============================================
# TLS/HTTPS (Railway handles this automatically)
# ============================================
TLS_ENABLED=false

# ============================================
# EMAIL SERVICE (Optional)
# ============================================
EMAIL_SERVICE_PROVIDER=sendgrid
EMAIL_API_KEY=
EMAIL_FROM=noreply@civicflow.app

# ============================================
# MICROSOFT TEAMS (Optional)
# ============================================
TEAMS_CLIENT_ID=
TEAMS_CLIENT_SECRET=
TEAMS_TENANT_ID=
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
TEAMS_WEBHOOK_SECRET=

# ============================================
# EXTERNAL SERVICES (Optional)
# ============================================
EIN_VERIFICATION_API_URL=
EIN_VERIFICATION_API_KEY=
USE_MOCK_EIN_VERIFICATION=true

# ============================================
# STORAGE (Optional)
# ============================================
STORAGE_PROVIDER=s3
STORAGE_BUCKET=
STORAGE_REGION=us-east-1

# ============================================
# AI SERVICES (Optional)
# ============================================

# Azure Document Intelligence
AZURE_DOCUMENT_INTELLIGENCE_ENDPOINT=
AZURE_DOCUMENT_INTELLIGENCE_KEY=
AZURE_DOCUMENT_INTELLIGENCE_TIMEOUT=30000

# OpenAI
LLM_PROVIDER=openai
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4
OPENAI_MAX_TOKENS=2000
OPENAI_TEMPERATURE=0.7
OPENAI_TIMEOUT=30000

# Claude (Alternative)
CLAUDE_API_KEY=
CLAUDE_MODEL=claude-3-sonnet-20240229
CLAUDE_MAX_TOKENS=2000

# AI Configuration
AI_CONFIDENCE_THRESHOLD=0.85
AI_MAX_RETRIES=3
AI_RETRY_DELAY=1000

# ============================================
# KEY MANAGEMENT (Optional)
# ============================================
KEY_MANAGEMENT_PROVIDER=local
KEY_MANAGEMENT_KEY_ID=encryption-key
KEY_ROTATION_DAYS=90

# AWS KMS (if using)
AWS_REGION=us-east-1
AWS_KMS_KEY_ID=

# Azure Key Vault (if using)
AZURE_KEY_VAULT_URL=
AZURE_KEY_VAULT_KEY_NAME=

# ============================================
# LOGGING
# ============================================
LOG_LEVEL=info

# ============================================
# NOTES
# ============================================
# 1. Generate secure JWT_SECRET and ENCRYPTION_KEY before deploying
# 2. Railway will auto-inject DATABASE_URL and REDIS_URL if you add those services
# 3. Demo mode is enabled by default for resilience
# 4. All optional services will gracefully degrade if not configured
# 5. The app will never crash due to missing credentials
